(this["webpackJsonpgosling-cistrome"]=this["webpackJsonpgosling-cistrome"]||[]).push([[0],{75:function(e,t,n){},77:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var i=n(1),l=n(20),a=n.n(l),r=n(37),o=n(2),d=n(15),s=n(16),c=(n(43),n(21)),u=n(35),m=["#0072B2","#D45E00","#029F73","#E79F00","#CB7AA7"],p=function(e){var t=e.cids,n=e.title,i=e.width,l=void 0===i?2e3:i,a=e.height,r="#878787",o="#878787",s=function(e){return m[e%m.length]},c=function(e){return"http://dc2.cistrome.org/genome_browser/bw/".concat(e,"_treat.bw")};return{spacing:50,views:[{xDomain:{chromosome:"7"},linkingId:"overview",tracks:[{id:"overview",linkingId:"overview",title:"Ideogram",xDomain:{chromosome:"7"},layout:"linear",alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],text:{field:"Name",type:"nominal"},color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["black","black","black","black","white","black"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],style:{textStrokeWidth:0}},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["white","#D9D9D9","#979797","#636363","black","#82A3D0"]}},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}],color:{value:"#E9413B"}},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}],color:{value:"#E9413B"}},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}],x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"gray"},strokeWidth:{value:.5},style:{outline:"black",outlineWidth:1},size:{value:25},width:l,height:45}]},{xDomain:{chromosome:"7",interval:[27066839,27266927]},linkingId:"detail",tracks:[{id:"detail-view",alignment:"overlay",title:"hg38 | Genes",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15,outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:[r,o]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{background:"#F5F5F5",outlineWidth:0},width:l,height:100},{title:"hg38 | GENECODE Transcript (Max. 15 Rows)",alignment:"overlay",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=transcript-hg38-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:0,name:"chr",type:"nominal"},{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"},{index:9,name:"exon_start",type:"nominal"},{index:10,name:"exon_end",type:"nominal"}]},dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],tracks:[{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-10,outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"exonSplit",separator:",",flag:{field:"type",value:"exon"},fields:[{field:"exon_start",type:"genomic",newField:"start",chrField:"chr"},{field:"exon_end",type:"genomic",newField:"end",chrField:"chr"}]},{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",size:{value:15},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"row",type:"nominal"},color:{field:"strand",type:"nominal",domain:["+","-"],range:[r,o]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{outline:"black",outlineWidth:0,background:"white"},width:l,height:void 0===a?500:a}].concat(Object(d.a)(t.filter((function(e){return+e})).map((function(e,t){return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{alignment:"overlay",data:{url:c(e),type:"bigwig",column:"position",value:"peak",binSize:8},title:t,tracks:i?[{},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}]:[{}],mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:s(n)},stroke:{value:"lightgray"},strokeWidth:{value:.5},style:{outline:"gray"},width:l,height:40}}(e,n,t)}))))}]}},f=(n(75),n(0)),h=1e3,g=window.innerWidth;var v=function(e){var t,n,l,a,r,o,m,v,y,x,b,j,O,k,w,F,_,T,C="1",W=Object(i.useState)(C),N=Object(s.a)(W,2),E=N[0],S=N[1],z=Object(i.useState)(g),B=Object(s.a)(z,2),D=B[0],R=B[1],I=Object(i.useState)(void 0),P=Object(s.a)(I,2),G=P[0],L=P[1],A=Object(i.useRef)();function M(e,t){(null===A||void 0===A?void 0:A.current)&&(A.current.api.zoomToGene("detail-view",e,h),A.current.api.zoomTo("overview",t,h))}Object(i.useEffect)((function(){window.addEventListener("resize",Object(c.debounce)((function(e){R(window.innerWidth)}),1e3)),q(C)}),[]);var q=function(e){fetch("http://dc2.cistrome.org/api/inspector?id=".concat(e)).then((function(e){return e.ok||console.log("Error: ".concat(e.statusText)),e.json()})).then((function(e){console.log(e),L(e)})).catch((function(e){console.warn(e)}))};Object(i.useEffect)((function(){+E&&q(E)}),[E]);var J=function(e){var t,n,i;return[null===e||void 0===e?void 0:e.id,null===e||void 0===e||null===(t=e.treats[0])||void 0===t?void 0:t.name,null===e||void 0===e||null===(n=e.treats[0])||void 0===n?void 0:n.cell_line__name,null===e||void 0===e||null===(i=e.treats[0])||void 0===i?void 0:i.cell_type__name].join(" | ")},U=Object(i.useMemo)((function(){return console.log(G),p({cids:[null===G||void 0===G?void 0:G.id],title:[J(G)],width:D-40-400-400})}),[G,D]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"vis",children:Object(f.jsx)(u.GoslingComponent,{ref:A,spec:U,padding:20,compiled:function(e,t){}})}),Object(f.jsxs)("div",{className:"gene-list",children:[Object(f.jsx)("h5",{children:"Cistrome ID"}),Object(f.jsx)("input",{className:"search-box",type:"text",defaultValue:C,name:"default name",placeholder:"Cistrome ID (e.g., ".concat(C,")"),onChange:Object(c.debounce)((function(e){S(e.target.value)}),1e3)}),Object(f.jsx)("h5",{children:"Chromosomes"}),[].concat(Object(d.a)(Array.from(Array(22).keys()).map((function(e){return e+1}))),["X","Y"]).map((function(e){return Object(f.jsx)("span",{className:"chr-button",onClick:function(){return t="chr".concat(e),void((null===A||void 0===A?void 0:A.current)&&(A.current.api.zoomTo("detail-view",t,h),A.current.api.zoomTo("overview",t,h)));var t},children:"chr".concat(e)},e)})),Object(f.jsx)("h5",{children:"Genes"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return M("TP53","chr17")},children:"TP53"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return M("TNF","chr6")},children:"TNF"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return M("MYC","chr8")},children:"MYC"}),Object(f.jsx)("div",{className:"gene-button",children:"..."}),Object(f.jsx)("h5",{children:"Expernal Links"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return window.open("http://dc2.cistrome.org/api/batchview/h/".concat(E.split(",").join("_"),"/w/"),"_blank")},children:"Wash U Browser"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return window.open("http://dc2.cistrome.org/api/batchview/h/".concat(E.split(",").join("_"),"/u/"),"_blank")},children:"UCSC Browser"})]}),Object(f.jsxs)("div",{className:"metadata-table",children:[Object(f.jsx)("h5",{children:"Inspector"}),Object(f.jsxs)("table",{children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"GEO or ENCODE"}),Object(f.jsx)("td",{children:null===G||void 0===G||null===(t=G.treats)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.unique_id})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Cistrome ID"}),Object(f.jsx)("td",{children:null===G||void 0===G?void 0:G.id})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Species"}),Object(f.jsx)("td",{children:null===G||void 0===G||null===(l=G.treats)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.species__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Cell Line"}),Object(f.jsx)("td",{children:null===G||void 0===G||null===(r=G.treats)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.cell_line__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Cell Type"}),Object(f.jsx)("td",{children:null===G||void 0===G||null===(m=G.treats)||void 0===m||null===(v=m[0])||void 0===v?void 0:v.cell_type__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Tissue"}),Object(f.jsx)("td",{children:null===G||void 0===G||null===(y=G.treats)||void 0===y||null===(x=y[0])||void 0===x?void 0:x.tissue_type__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Disease"}),Object(f.jsx)("td",{children:null===G||void 0===G||null===(b=G.treats)||void 0===b||null===(j=b[0])||void 0===j?void 0:j.disease_state__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Factor"}),Object(f.jsx)("td",{children:null===G||void 0===G||null===(O=G.treats)||void 0===O||null===(k=O[0])||void 0===k?void 0:k.factor__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Paper"}),Object(f.jsx)("td",{children:Object(f.jsx)("a",{href:null===G||void 0===G||null===(w=G.treats)||void 0===w||null===(F=w[0])||void 0===F?void 0:F.link,target:"_blank",rel:"noopener noreferrer",children:null===G||void 0===G||null===(_=G.treats)||void 0===_||null===(T=_[0])||void 0===T?void 0:T.paper__reference})})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Raw Data"}),Object(f.jsx)("td",{children:Object(f.jsx)("a",{href:"http://dc2.cistrome.org/api/inspector?id=".concat(null===G||void 0===G?void 0:G.id),target:"_blank",rel:"noopener noreferrer",children:"JSON"})})]})]})]})]})};n(77);a.a.render(Object(f.jsx)(r.a,{children:Object(f.jsx)(o.a,{component:v})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.835ef168.chunk.js.map