{"version":3,"sources":["App.js","gos-template.js","index.js"],"names":["App","props","defaultKeyword","useState","searchKeyword","setSearchKeyword","window","innerWidth","setInnerWidth","gosRef","useRef","onZoom","gene","pos","current","api","zoomToGene","zoomTo","onResize","useEffect","addEventListener","newSpec","useMemo","cids","width","height","sampleColor","plusColor","minusColor","getSampleColor","index","length","getBwLink","cid","getSampleBar","isBrush","alignment","data","url","type","column","value","binSize","title","tracks","mark","x","linkingId","color","stroke","strokeWidth","opacity","field","xe","y","style","outline","console","log","filter","map","subtitle","join","spacing","views","xDomain","chromosome","id","layout","chromosomeField","genomicFields","dataTransform","oneOf","not","text","domain","range","visibility","operation","measure","threshold","transitionPadding","target","textStrokeWidth","include","outlineWidth","interval","i","name","valueFields","exonIntervalFields","size","dy","align","linePattern","row","background","method","boundingBox","startField","endField","newField","maxRows","getSpec","split","className","ref","spec","compiled","vConf","defaultValue","placeholder","onChange","debounce","e","Array","from","keys","d","k","onClick","chr","ReactDOM","render","component","document","getElementById"],"mappings":"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","file":"static/js/main.9765c433.chunk.js","sourcesContent":["import * as qs from 'qs';\nimport { debounce } from 'lodash';\nimport { validateGoslingSpec, GoslingComponent } from \"gosling.js\";\nimport { getSpec } from \"./gos-template\";\nimport './App.css';\nimport { useEffect, useMemo, useRef, useState } from 'react';\n\nfunction App(props) {\n  // url parameters\n  // const urlParams = qs.parse(props.location.search, { ignoreQueryPrefix: true });\n  // const cid = urlParams?.id; // Cistrome ID\n\n  const defaultKeyword = '1,2,4';\n  const [searchKeyword, setSearchKeyword] = useState(defaultKeyword);\n\n  // visual parameters\n  const [innerWidth, setInnerWidth] = useState(window.innerWidth);\n\n  // API of gosling.js\n  const gosRef = useRef();\n\n  function onZoom(gene, pos) {\n    if(!gosRef?.current) return;\n\n    gosRef.current.api.zoomToGene('detail-view', gene, 1000);\n    gosRef.current.api.zoomTo('overview', pos, 1000);\n  }\n\n  function onZoomChr(chr) {\n    if(!gosRef?.current) return;\n\n    gosRef.current.api.zoomTo('detail-view', chr, 1000);\n    gosRef.current.api.zoomTo('overview', chr, 1000);\n  }\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", onResize);\n  }, []);\n  \n  function onResize() {\n    setInnerWidth(window.innerWidth);\n  }\n\n  // validate the spec\n  // const validity = validateGoslingSpec(getSpec({cid}));\n  // if(validity.state === 'error') {\n  //     console.warn('Gosling spec is invalid!', validity.message);\n  //     return;\n  // }\n\n  const newSpec = useMemo(() => {\n    const cids = searchKeyword.split(',');\n    return getSpec({\n      cids, width: innerWidth - 120 /* padding */ - 400 /* gene panel on the right */\n    })\n  }, [searchKeyword, innerWidth]);\n\n  return (\n    <>\n      <div className='vis'>\n        <GoslingComponent\n          ref={gosRef}\n          spec={newSpec}\n          compiled={(spec, vConf) => { /* Callback function when compiled */ }}\n        />\n      </div>\n      <div className=\"gene-list\">\n      <h5>Cistrome ID</h5>\n      <input\n        // ref={searchBoxRef}\n        className={\"search-box\"}\n        type=\"text\"\n        defaultValue={defaultKeyword}\n        name=\"default name\"\n        placeholder={`Cistrome ID (e.g., ${defaultKeyword})`}\n        // value={searchKeyword}\n        onChange={debounce(e => {\n          setSearchKeyword(e.target.value);\n        }, 1000)}\n        // onKeyDown={(e) => {\n        //     switch(e.key){\n        //         case 'ArrowUp':\n        //             break;\n        //         case 'ArrowDown':\n        //             break;\n        //         case 'Enter':\n        //             setGeneSuggestions([]);\n        //             if(searchKeyword.includes('chr')) {\n        //                 hmRef.current.api.zoomTo(searchKeyword);\n        //             } else {\n        //                 hmRef.current.api.zoomToGene(searchKeyword);\n        //             }\n        //             break;\n        //         case 'Esc':\n        //         case 'Escape':\n        //             break;\n        //     }\n        // }}\n        />\n        <h5>Chromosomes</h5>\n        {\n          [...Array.from(Array(22).keys()).map(d => d+1), 'X', 'Y'].map(k => <span key={k} className=\"chr-button\" onClick={() => onZoomChr(`chr${k}`)}>{`chr${k}`}</span>)\n        }\n        <h5>Genes</h5>\n        <div className=\"gene-button\" onClick={() => onZoom('TP53', 'chr17')}>TP53</div>\n        <div className=\"gene-button\" onClick={() => onZoom('TNF', 'chr6')}>TNF</div>\n        <div className=\"gene-button\" onClick={() => onZoom('MYC', 'chr8')}>MYC</div>\n        <div className=\"gene-button\">...</div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","export const getSpec = ({ cids, width = 2000, height = 500 }) => {\n  // \"#0072B2\", \"#D45E00\"\n  const sampleColor = [\"#0072B2\", \"#D45E00\", \"#029F73\", \"#E79F00\", \"#CB7AA7\"];\n  const plusColor = \"#878787\"; //\"#D34B6C\";\n  const minusColor = \"#878787\"; //\"#5688B9\";\n\n  const getSampleColor = (index) => {\n    return sampleColor[index % sampleColor.length];\n  };\n\n  const getBwLink = (cid) =>\n    `http://dc2.cistrome.org/genome_browser/bw/${cid}_treat.bw`;\n\n  const getSampleBar = (cid, index, isBrush = false) => {\n    return {\n      alignment: \"overlay\",\n      data: {\n        url: getBwLink(cid),\n        type: \"bigwig\",\n        column: \"position\",\n        value: \"peak\",\n        binSize: 8,\n      },\n      title: \"Cistrome ID: \" + cid,\n      tracks: isBrush\n        ? [\n            {},\n            {\n              mark: \"brush\",\n              x: { linkingId: \"detail\" },\n              color: { value: \"#D34B6C\" },\n              stroke: { value: \"red\" },\n              strokeWidth: { value: 2 },\n              opacity: { value: 0.6 },\n            },\n          ]\n        : [{}],\n      mark: \"bar\",\n      x: { field: \"start\", type: \"genomic\" },\n      xe: { field: \"end\", type: \"genomic\" },\n      y: { field: \"peak\", type: \"quantitative\" },\n      color: { value: getSampleColor(index) },\n      stroke: { value: \"lightgray\" },\n      strokeWidth: { value: 0.5 },\n      style: { outline: \"gray\" },\n      // opacity: { value: 0.6 },\n      width,\n      height: 40,\n    };\n  };\n\n  console.log(\n    cids,\n    cids.filter((cid) => +cid).map((cid) => getSampleBar(cid))\n  );\n\n  return {\n    title: \"Explore Cistrome Data Using Gosling.js\",\n    subtitle: `Cistrome IDs: ${cids.join(\", \")}`,\n    spacing: 50,\n    views: [\n      {\n        xDomain: { chromosome: \"3\" },\n        linkingId: \"overview\",\n        tracks: [\n          // ...cids.filter(cid => +cid).map((cid, i) => getSampleBar(cid, i, true)),\n          {\n            id: \"overview\",\n            linkingId: \"overview\",\n            title: \"Ideogram\",\n            xDomain: { chromosome: \"3\" },\n            layout: \"linear\",\n            alignment: \"overlay\",\n            data: {\n              url:\n                \"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv\",\n              type: \"csv\",\n              chromosomeField: \"Chromosome\",\n              genomicFields: [\"chromStart\", \"chromEnd\"],\n            },\n            tracks: [\n              {\n                mark: \"text\",\n                dataTransform: [\n                  {\n                    type: \"filter\",\n                    field: \"Stain\",\n                    oneOf: [\"acen\"],\n                    not: true,\n                  },\n                ],\n                text: { field: \"Name\", type: \"nominal\" },\n                color: {\n                  field: \"Stain\",\n                  type: \"nominal\",\n                  domain: [\n                    \"gneg\",\n                    \"gpos25\",\n                    \"gpos50\",\n                    \"gpos75\",\n                    \"gpos100\",\n                    \"gvar\",\n                  ],\n                  range: [\"black\", \"black\", \"black\", \"black\", \"white\", \"black\"],\n                },\n                visibility: [\n                  {\n                    operation: \"less-than\",\n                    measure: \"width\",\n                    threshold: \"|xe-x|\",\n                    transitionPadding: 10,\n                    target: \"mark\",\n                  },\n                ],\n                style: { textStrokeWidth: 0 },\n              },\n              {\n                mark: \"rect\",\n                dataTransform: [\n                  {\n                    type: \"filter\",\n                    field: \"Stain\",\n                    oneOf: [\"acen\"],\n                    not: true,\n                  },\n                ],\n                color: {\n                  field: \"Stain\",\n                  type: \"nominal\",\n                  domain: [\n                    \"gneg\",\n                    \"gpos25\",\n                    \"gpos50\",\n                    \"gpos75\",\n                    \"gpos100\",\n                    \"gvar\",\n                  ],\n                  range: [\n                    \"white\",\n                    \"#D9D9D9\",\n                    \"#979797\",\n                    \"#636363\",\n                    \"black\",\n                    \"#82A3D0\",\n                  ],\n                },\n              },\n              {\n                mark: \"triangleRight\",\n                dataTransform: [\n                  { type: \"filter\", field: \"Stain\", oneOf: [\"acen\"] },\n                  { type: \"filter\", field: \"Name\", include: \"q\" },\n                ],\n                color: { value: \"#E9413B\" },\n              },\n              {\n                mark: \"triangleLeft\",\n                dataTransform: [\n                  { type: \"filter\", field: \"Stain\", oneOf: [\"acen\"] },\n                  { type: \"filter\", field: \"Name\", include: \"p\" },\n                ],\n                color: { value: \"#E9413B\" }, // #B40101\n              },\n              {\n                mark: \"brush\",\n                x: { linkingId: \"detail\" },\n                color: { value: \"#D34B6C\" },\n                stroke: { value: \"red\" },\n                strokeWidth: { value: 2 },\n                opacity: { value: 0.6 },\n              },\n            ],\n            x: { field: \"chromStart\", type: \"genomic\" },\n            xe: { field: \"chromEnd\", type: \"genomic\" },\n            stroke: { value: \"gray\" },\n            strokeWidth: { value: 0.5 },\n            style: { outline: \"black\", outlineWidth: 1 },\n            width,\n            height: 25,\n          },\n        ],\n      },\n      {\n        xDomain: { chromosome: \"3\", interval: [142500000, 143000000] },\n        linkingId: \"detail\",\n        tracks: [\n          ...cids.filter((cid) => +cid).map((cid, i) => getSampleBar(cid, i)),\n          {\n            id: \"detail-view\",\n            alignment: \"overlay\",\n            title: \"hg38 | Genes\",\n            data: {\n              url:\n                \"https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation\",\n              type: \"beddb\",\n              genomicFields: [\n                { index: 1, name: \"start\" },\n                { index: 2, name: \"end\" },\n              ],\n              valueFields: [\n                { index: 5, name: \"strand\", type: \"nominal\" },\n                { index: 3, name: \"name\", type: \"nominal\" },\n              ],\n              exonIntervalFields: [\n                { index: 12, name: \"start\" },\n                { index: 13, name: \"end\" },\n              ],\n            },\n            tracks: [\n              {\n                dataTransform: [\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"+\"] },\n                ],\n                mark: \"triangleRight\",\n                x: { field: \"end\", type: \"genomic\" },\n                size: { value: 15 },\n              },\n              {\n                dataTransform: [\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                ],\n                mark: \"text\",\n                text: { field: \"name\", type: \"nominal\" },\n                x: { field: \"start\", type: \"genomic\" },\n                xe: { field: \"end\", type: \"genomic\" },\n                style: { dy: -15, outline: \"black\", outlineWidth: 0 },\n              },\n              {\n                dataTransform: [\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"-\"] },\n                ],\n                mark: \"triangleLeft\",\n                x: { field: \"start\", type: \"genomic\" },\n                size: { value: 15 },\n                style: { align: \"right\", outline: \"black\", outlineWidth: 0 },\n              },\n              {\n                dataTransform: [\n                  { type: \"filter\", field: \"type\", oneOf: [\"exon\"] },\n                ],\n                mark: \"rect\",\n                x: { field: \"start\", type: \"genomic\" },\n                size: { value: 15 },\n                xe: { field: \"end\", type: \"genomic\" },\n              },\n              {\n                dataTransform: [\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"+\"] },\n                ],\n                mark: \"rule\",\n                x: { field: \"start\", type: \"genomic\" },\n                strokeWidth: { value: 2 },\n                xe: { field: \"end\", type: \"genomic\" },\n                style: {\n                  linePattern: { type: \"triangleRight\", size: 3.5 },\n                  outline: \"black\",\n                  outlineWidth: 0,\n                },\n              },\n              {\n                dataTransform: [\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"-\"] },\n                ],\n                mark: \"rule\",\n                x: { field: \"start\", type: \"genomic\" },\n                strokeWidth: { value: 2 },\n                xe: { field: \"end\", type: \"genomic\" },\n                style: {\n                  linePattern: { type: \"triangleLeft\", size: 3.5 },\n                  outline: \"black\",\n                  outlineWidth: 0,\n                },\n              },\n            ],\n            row: { field: \"strand\", type: \"nominal\", domain: [\"+\", \"-\"] },\n            color: {\n              field: \"strand\",\n              type: \"nominal\",\n              domain: [\"+\", \"-\"],\n              range: [plusColor, minusColor],\n            },\n            visibility: [\n              {\n                operation: \"less-than\",\n                measure: \"width\",\n                threshold: \"|xe-x|\",\n                transitionPadding: 10,\n                target: \"mark\",\n              },\n            ],\n            opacity: { value: 0.8 },\n            style: { background: \"#F5F5F5\", outlineWidth: 0 },\n            width: 350,\n            height: 100,\n          },\n\n          {\n            title: \"hg38 | GENECODE Transcript (Max. 15 Rows)\",\n            alignment: \"overlay\",\n            data: {\n              url:\n                \"https://server.gosling-lang.org/api/v1/tileset_info/?d=transcript-hg38-beddb\",\n              type: \"beddb\",\n              genomicFields: [\n                { index: 1, name: \"start\" },\n                { index: 2, name: \"end\" },\n              ],\n              valueFields: [\n                { index: 5, name: \"strand\", type: \"nominal\" },\n                { index: 3, name: \"name\", type: \"nominal\" },\n              ],\n            },\n            dataTransform: [\n              {\n                type: \"displace\",\n                method: \"pile\",\n                boundingBox: { startField: \"start\", endField: \"end\" },\n                newField: \"row\",\n                maxRows: 15,\n              },\n              { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n            ],\n            tracks: [\n              {\n                dataTransform: [\n                  {\n                    type: \"displace\",\n                    method: \"pile\",\n                    boundingBox: { startField: \"start\", endField: \"end\" },\n                    newField: \"row\",\n                    maxRows: 15,\n                  },\n\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"+\"] },\n                ],\n                mark: \"triangleRight\",\n                x: { field: \"end\", type: \"genomic\" },\n                size: { value: 15 },\n              },\n              {\n                dataTransform: [\n                  {\n                    type: \"displace\",\n                    method: \"pile\",\n                    boundingBox: { startField: \"start\", endField: \"end\" },\n                    newField: \"row\",\n                    maxRows: 15,\n                  },\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                ],\n                mark: \"text\",\n                text: { field: \"name\", type: \"nominal\" },\n                x: { field: \"start\", type: \"genomic\" },\n                xe: { field: \"end\", type: \"genomic\" },\n                style: { dy: -10, outline: \"black\", outlineWidth: 0 },\n              },\n              {\n                dataTransform: [\n                  {\n                    type: \"displace\",\n                    method: \"pile\",\n                    boundingBox: { startField: \"start\", endField: \"end\" },\n                    newField: \"row\",\n                    maxRows: 15,\n                  },\n\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"-\"] },\n                ],\n                mark: \"triangleLeft\",\n                x: { field: \"start\", type: \"genomic\" },\n                size: { value: 15 },\n                style: { align: \"right\", outline: \"black\", outlineWidth: 0 },\n              },\n              {\n                dataTransform: [\n                  {\n                    type: \"displace\",\n                    method: \"pile\",\n                    boundingBox: { startField: \"start\", endField: \"end\" },\n                    newField: \"row\",\n                    maxRows: 15,\n                  },\n                  { type: \"filter\", field: \"type\", oneOf: [\"exon\"] },\n                ],\n                mark: \"rect\",\n                x: { field: \"start\", type: \"genomic\" },\n                xe: { field: \"end\", type: \"genomic\" },\n              },\n              {\n                dataTransform: [\n                  {\n                    type: \"displace\",\n                    method: \"pile\",\n                    boundingBox: { startField: \"start\", endField: \"end\" },\n                    newField: \"row\",\n                    maxRows: 15,\n                  },\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"+\"] },\n                ],\n                mark: \"rule\",\n                x: { field: \"start\", type: \"genomic\" },\n                strokeWidth: { value: 2 },\n                xe: { field: \"end\", type: \"genomic\" },\n                style: {\n                  linePattern: { type: \"triangleRight\", size: 3.5 },\n                  outline: \"black\",\n                  outlineWidth: 0,\n                },\n              },\n              {\n                dataTransform: [\n                  {\n                    type: \"displace\",\n                    method: \"pile\",\n                    boundingBox: { startField: \"start\", endField: \"end\" },\n                    newField: \"row\",\n                    maxRows: 15,\n                  },\n                  { type: \"filter\", field: \"type\", oneOf: [\"gene\"] },\n                  { type: \"filter\", field: \"strand\", oneOf: [\"-\"] },\n                ],\n                mark: \"rule\",\n                x: { field: \"start\", type: \"genomic\" },\n                strokeWidth: { value: 2 },\n                xe: { field: \"end\", type: \"genomic\" },\n                style: {\n                  linePattern: { type: \"triangleRight\", size: 3.5 },\n                  outline: \"black\",\n                  outlineWidth: 0,\n                },\n              },\n            ],\n            row: { field: \"row\", type: \"nominal\" },\n            color: {\n              field: \"strand\",\n              type: \"nominal\",\n              domain: [\"+\", \"-\"],\n              range: [plusColor, minusColor],\n            },\n            visibility: [\n              {\n                operation: \"less-than\",\n                measure: \"width\",\n                threshold: \"|xe-x|\",\n                transitionPadding: 10,\n                target: \"mark\",\n              },\n            ],\n            opacity: { value: 0.8 },\n            style: { outline: \"black\", outlineWidth: 0, background: \"white\" },\n            width,\n            height,\n          },\n        ],\n      },\n    ],\n  };\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <BrowserRouter>\n    <Route component={App} />\n  </BrowserRouter>,\n  document.getElementById('root')\n);"],"sourceRoot":""}