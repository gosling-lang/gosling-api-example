(this["webpackJsonpgosling-cistrome"]=this["webpackJsonpgosling-cistrome"]||[]).push([[0],{77:function(e,t,n){},79:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var i=n(1),l=n(21),o=n.n(l),a=n(38),r=n(2),d=n(17),c=n(9),s=(n(44),n(35)),u=n(36),m=["#0072B2","#D45E00","#029F73","#E79F00","#CB7AA7"],p=function(e){var t=e.cids,n=e.title,i=e.width,l=void 0===i?2e3:i,o=e.height,a=void 0===o?500:o,r=e.theme,c="#878787",s="#878787",u=function(e){return m[e%m.length]},p=function(e){return"http://dc2.cistrome.org/genome_browser/bw/".concat(e,"_treat.bw")};return{theme:void 0===r?"light":r,spacing:50,views:[{xDomain:{chromosome:"7"},linkingId:"overview",tracks:[{id:"overview",linkingId:"overview",title:"Ideogram",xDomain:{chromosome:"7"},layout:"linear",alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],text:{field:"Name",type:"nominal"},color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["black","black","black","black","white","black"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],style:{textStrokeWidth:0}},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["white","#D9D9D9","#979797","#636363","black","#82A3D0"]}},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}],color:{value:"#E9413B"}},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}],color:{value:"#E9413B"}},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}],x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"gray"},strokeWidth:{value:.5},style:{outline:"black",outlineWidth:1},size:{value:25},width:l,height:45}]},{xDomain:{chromosome:"7",interval:[27066839,27266927]},linkingId:"detail",tracks:[{id:"detail-view",alignment:"overlay",title:"hg38 | Genes",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15,outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:[c,s]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{background:"#F5F5F5",outlineWidth:0},width:l,height:100},{title:"hg38 | GENECODE Transcript (Max. 15 Rows)",alignment:"overlay",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=transcript-hg38-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:0,name:"chr",type:"nominal"},{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"},{index:9,name:"exon_start",type:"nominal"},{index:10,name:"exon_end",type:"nominal"}]},dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],tracks:[{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-10,outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"exonSplit",separator:",",flag:{field:"type",value:"exon"},fields:[{field:"exon_start",type:"genomic",newField:"start",chrField:"chr"},{field:"exon_end",type:"genomic",newField:"end",chrField:"chr"}]},{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",size:{value:15},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"row",type:"nominal"},color:{field:"strand",type:"nominal",domain:["+","-"],range:[c,s]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{outline:"black",outlineWidth:0},width:l,height:a}].concat(Object(d.a)(t.filter((function(e){return+e})).map((function(e,t){return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{alignment:"overlay",data:{url:p(e),type:"bigwig",column:"position",value:"peak",binSize:8},title:t,tracks:i?[{},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}]:[{}],mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative",axis:"right"},color:{value:u(n)},stroke:{value:"lightgray"},strokeWidth:{value:.5},style:{outline:"gray"},width:l,height:40}}(e,n,t)}))))}]}},h=(n(77),n(0)),f=1e3,g=window.innerWidth;var v=function(e){var t,n,l,o,a,r,m,v,y,b,x,j,O,k,w,_,F,T,C,D,N,E="1",W=Object(i.useState)(E),S=Object(c.a)(W,2),z=S[0],B=S[1],R=Object(i.useState)(),I=Object(c.a)(R,2),P=I[0],A=I[1],G=Object(i.useState)(g),L=Object(c.a)(G,2),U=L[0],M=L[1],q=Object(i.useState)(void 0),J=Object(c.a)(q,2),H=J[0],K=J[1],Y=Object(i.useState)(void 0),V=Object(c.a)(Y,2),X=V[0],Q=V[1],Z=Object(i.useState)("light"),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ne=Object(i.useRef)();function ie(e){(null===ne||void 0===ne?void 0:ne.current)&&e.includes("chr")&&e.includes(":")&&e.includes("-")&&(ne.current.api.zoomTo("overview",e.split(":")[0],f),ne.current.api.zoomTo("detail-view",e,f))}function le(e){(null===ne||void 0===ne?void 0:ne.current)&&(e?ne.current.api.exportPDF():ne.current.api.exportPNG())}Object(i.useEffect)((function(){window.addEventListener("resize",Object(s.debounce)((function(e){M(window.innerWidth)}),1e3)),oe(E)}),[]);var oe=function(e){fetch("http://dc2.cistrome.org/api/inspector?id=".concat(e)).then((function(e){return e.ok||console.log("Error: ".concat(e.statusText)),e.json()})).then((function(e){K(e)})).catch((function(e){console.warn(e)}))};Object(i.useEffect)((function(){+z&&(oe(z),fetch("http://dc2.cistrome.org/api/putative_target_ng?gene=&id=".concat(z)).then((function(e){return e.ok||console.log("Error: ".concat(e.statusText)),e.json()})).then((function(e){Q(e)})).catch((function(e){console.warn(e)})))}),[z]),Object(i.useEffect)((function(){P&&ie(P)}),[P]);var ae=function(e){var t,n,i;return[null===e||void 0===e?void 0:e.id,null===e||void 0===e||null===(t=e.treats[0])||void 0===t?void 0:t.name,null===e||void 0===e||null===(n=e.treats[0])||void 0===n?void 0:n.cell_line__name,null===e||void 0===e||null===(i=e.treats[0])||void 0===i?void 0:i.cell_type__name].join(" | ")},re=Object(i.useMemo)((function(){return console.log(H),p({theme:ee,cids:[null===H||void 0===H?void 0:H.id],title:[ae(H)],width:U-40-400-400})}),[ee,H,U]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"vis ".concat(ee),children:Object(h.jsx)(u.GoslingComponent,{ref:ne,spec:re,padding:20,compiled:function(e,t){}})}),Object(h.jsx)("div",{className:"Mus musculus"===(null===H||void 0===H||null===(t=H.treats)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.species__name)?"vis-overlay":"vis-overlay-hidden",children:"Mouse Genome Is Not Supported Yet"}),Object(h.jsxs)("div",{className:"gene-list ".concat(ee),children:[Object(h.jsx)("h5",{children:"Cistrome ID"}),Object(h.jsx)("input",{className:"search-box",type:"text",defaultValue:E,name:"default name",placeholder:"Cistrome ID (e.g., ".concat(E,")"),onKeyDown:function(e){switch(e.key){case"ArrowUp":case"ArrowDown":break;case"Enter":B(e.target.value)}}}),Object(h.jsx)("h5",{children:"Navigation"}),Object(h.jsx)("input",{className:"search-box",type:"text",name:"default name",placeholder:"chr6:151690496-152103274",onKeyDown:function(e){switch(e.key){case"ArrowUp":case"ArrowDown":break;case"Enter":A(e.target.value)}}}),Object(h.jsx)("h5",{children:"Chromosomes"}),[].concat(Object(d.a)(Array.from(Array(22).keys()).map((function(e){return e+1}))),["X","Y"]).map((function(e){return Object(h.jsx)("span",{className:"chr-button",onClick:function(){return t="chr".concat(e),void((null===ne||void 0===ne?void 0:ne.current)&&(ne.current.api.zoomTo("detail-view",t,f),ne.current.api.zoomTo("overview",t,f)));var t},children:"chr".concat(e)},e)})),Object(h.jsxs)("h5",{children:["Putative Targets ",Object(h.jsx)("a",{className:"sub-info",href:"http://dc2.cistrome.org/api/putative_target_ng?gene=&id=".concat(z),children:"Raw Data"})]}),null===X||void 0===X||null===(l=X.filter((function(e){return e.symbol===e.symbol.toUpperCase()||!0})).slice(0,10))||void 0===l?void 0:l.map((function(e){return Object(h.jsx)("div",{className:"gene-button",onClick:function(){return ie(e.visual_coordinate)},children:e.symbol},e.symbol)})),Object(h.jsx)("h5",{children:"Theme"}),Object(h.jsx)("div",{className:"gene-button",onClick:function(){return te("light")},children:"Light"}),Object(h.jsx)("div",{className:"gene-button",onClick:function(){return te("dark")},children:"Dark"}),Object(h.jsx)("h5",{children:"Export"}),Object(h.jsx)("div",{className:"gene-button",onClick:function(){return le(!0)},children:"PDF"}),Object(h.jsx)("div",{className:"gene-button",onClick:function(){return le(!1)},children:"PNG"})]}),Object(h.jsxs)("div",{className:"metadata-table ".concat(ee),children:[Object(h.jsx)("h5",{children:"Inspector"}),Object(h.jsxs)("table",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"GEO or ENCODE"}),Object(h.jsx)("td",{children:null===H||void 0===H||null===(o=H.treats)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.unique_id})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Cistrome ID"}),Object(h.jsx)("td",{children:null===H||void 0===H?void 0:H.id})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Species"}),Object(h.jsx)("td",{children:null===H||void 0===H||null===(r=H.treats)||void 0===r||null===(m=r[0])||void 0===m?void 0:m.species__name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Cell Line"}),Object(h.jsx)("td",{children:null===H||void 0===H||null===(v=H.treats)||void 0===v||null===(y=v[0])||void 0===y?void 0:y.cell_line__name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Cell Type"}),Object(h.jsx)("td",{children:null===H||void 0===H||null===(b=H.treats)||void 0===b||null===(x=b[0])||void 0===x?void 0:x.cell_type__name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Tissue"}),Object(h.jsx)("td",{children:null===H||void 0===H||null===(j=H.treats)||void 0===j||null===(O=j[0])||void 0===O?void 0:O.tissue_type__name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Disease"}),Object(h.jsx)("td",{children:null===H||void 0===H||null===(k=H.treats)||void 0===k||null===(w=k[0])||void 0===w?void 0:w.disease_state__name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Factor"}),Object(h.jsx)("td",{children:null===H||void 0===H||null===(_=H.treats)||void 0===_||null===(F=_[0])||void 0===F?void 0:F.factor__name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Paper"}),Object(h.jsx)("td",{children:Object(h.jsx)("a",{href:null===H||void 0===H||null===(T=H.treats)||void 0===T||null===(C=T[0])||void 0===C?void 0:C.link,target:"_blank",rel:"noopener noreferrer",children:null===H||void 0===H||null===(D=H.treats)||void 0===D||null===(N=D[0])||void 0===N?void 0:N.paper__reference})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Raw Data"}),Object(h.jsx)("td",{children:Object(h.jsx)("a",{href:"http://dc2.cistrome.org/api/inspector?id=".concat(null===H||void 0===H?void 0:H.id),target:"_blank",rel:"noopener noreferrer",children:"JSON"})})]})]}),Object(h.jsx)("h5",{children:"Expernal Links"}),Object(h.jsx)("div",{className:"gene-button",onClick:function(){return window.open("http://dc2.cistrome.org/api/batchview/h/".concat(z.split(",").join("_"),"/w/"),"_blank")},children:"Wash U Browser"}),Object(h.jsx)("div",{className:"gene-button",onClick:function(){return window.open("http://dc2.cistrome.org/api/batchview/h/".concat(z.split(",").join("_"),"/u/"),"_blank")},children:"UCSC Browser"})]})]})};n(79);o.a.render(Object(h.jsx)(a.a,{children:Object(h.jsx)(r.a,{component:v})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.d9d5b09d.chunk.js.map