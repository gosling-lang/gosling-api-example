(this["webpackJsonpgosling-cistrome"]=this["webpackJsonpgosling-cistrome"]||[]).push([[0],{79:function(e,t,n){},81:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var i=n(1),l=n(21),o=n.n(l),a=n(40),r=n(2),d=n(16),c=n(9),s=(n(46),n(35)),u=n(36),m=["#0072B2","#D45E00","#029F73","#E79F00","#CB7AA7"],p=function(e){var t=e.cids,n=e.title,i=e.width,l=void 0===i?2e3:i,o=e.height,a="#878787",r="#878787",c=function(e){return m[e%m.length]},s=function(e){return"http://dc2.cistrome.org/genome_browser/bw/".concat(e,"_treat.bw")};return{spacing:50,views:[{xDomain:{chromosome:"7"},linkingId:"overview",tracks:[{id:"overview",linkingId:"overview",title:"Ideogram",xDomain:{chromosome:"7"},layout:"linear",alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],text:{field:"Name",type:"nominal"},color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["black","black","black","black","white","black"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],style:{textStrokeWidth:0}},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["white","#D9D9D9","#979797","#636363","black","#82A3D0"]}},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}],color:{value:"#E9413B"}},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}],color:{value:"#E9413B"}},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}],x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"gray"},strokeWidth:{value:.5},style:{outline:"black",outlineWidth:1},size:{value:25},width:l,height:45}]},{xDomain:{chromosome:"7",interval:[27066839,27266927]},linkingId:"detail",tracks:[{id:"detail-view",alignment:"overlay",title:"hg38 | Genes",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15,outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:[a,r]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{background:"#F5F5F5",outlineWidth:0},width:l,height:100},{title:"hg38 | GENECODE Transcript (Max. 15 Rows)",alignment:"overlay",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=transcript-hg38-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:0,name:"chr",type:"nominal"},{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"},{index:9,name:"exon_start",type:"nominal"},{index:10,name:"exon_end",type:"nominal"}]},dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],tracks:[{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-10,outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"exonSplit",separator:",",flag:{field:"type",value:"exon"},fields:[{field:"exon_start",type:"genomic",newField:"start",chrField:"chr"},{field:"exon_end",type:"genomic",newField:"end",chrField:"chr"}]},{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",size:{value:15},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"row",type:"nominal"},color:{field:"strand",type:"nominal",domain:["+","-"],range:[a,r]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{outline:"black",outlineWidth:0,background:"white"},width:l,height:void 0===o?500:o}].concat(Object(d.a)(t.filter((function(e){return+e})).map((function(e,t){return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{alignment:"overlay",data:{url:s(e),type:"bigwig",column:"position",value:"peak",binSize:8},title:t,tracks:i?[{},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}]:[{}],mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:c(n)},stroke:{value:"lightgray"},strokeWidth:{value:.5},style:{outline:"gray"},width:l,height:40}}(e,n,t)}))))}]}},f=(n(79),n(0)),h=1e3,g=window.innerWidth;var v=function(e){var t,n,l,o,a,r,m,v,y,x,b,j,O,k,w,_,F,T,C,D,E,N="1",W=Object(i.useState)(N),S=Object(c.a)(W,2),z=S[0],B=S[1],R=Object(i.useState)(),I=Object(c.a)(R,2),P=I[0],A=I[1],G=Object(i.useState)(g),L=Object(c.a)(G,2),U=L[0],M=L[1],q=Object(i.useState)(void 0),J=Object(c.a)(q,2),H=J[0],K=J[1],Y=Object(i.useState)(void 0),V=Object(c.a)(Y,2),X=V[0],Q=V[1],Z=Object(i.useRef)();function $(e){(null===Z||void 0===Z?void 0:Z.current)&&e.includes("chr")&&e.includes(":")&&e.includes("-")&&(Z.current.api.zoomTo("overview",e.split(":")[0],h),Z.current.api.zoomTo("detail-view",e,h))}function ee(e){(null===Z||void 0===Z?void 0:Z.current)&&(e?Z.current.api.exportPDF():Z.current.api.exportPNG())}Object(i.useEffect)((function(){window.addEventListener("resize",Object(s.debounce)((function(e){M(window.innerWidth)}),1e3)),te(N)}),[]);var te=function(e){fetch("http://dc2.cistrome.org/api/inspector?id=".concat(e)).then((function(e){return e.ok||console.log("Error: ".concat(e.statusText)),e.json()})).then((function(e){K(e)})).catch((function(e){console.warn(e)}))};Object(i.useEffect)((function(){+z&&(te(z),fetch("http://dc2.cistrome.org/api/putative_target_ng?gene=&id=".concat(z)).then((function(e){return e.ok||console.log("Error: ".concat(e.statusText)),e.json()})).then((function(e){Q(e)})).catch((function(e){console.warn(e)})))}),[z]),Object(i.useEffect)((function(){P&&$(P)}),[P]);var ne=function(e){var t,n,i;return[null===e||void 0===e?void 0:e.id,null===e||void 0===e||null===(t=e.treats[0])||void 0===t?void 0:t.name,null===e||void 0===e||null===(n=e.treats[0])||void 0===n?void 0:n.cell_line__name,null===e||void 0===e||null===(i=e.treats[0])||void 0===i?void 0:i.cell_type__name].join(" | ")},ie=Object(i.useMemo)((function(){return console.log(H),p({cids:[null===H||void 0===H?void 0:H.id],title:[ne(H)],width:U-40-400-400})}),[H,U]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"vis",children:Object(f.jsx)(u.GoslingComponent,{ref:Z,spec:ie,padding:20,compiled:function(e,t){}})}),Object(f.jsx)("div",{className:"Mus musculus"===(null===H||void 0===H||null===(t=H.treats)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.species__name)?"vis-overlay":"vis-overlay-hidden",children:"Mouse Genome Is Not Supported Yet"}),Object(f.jsxs)("div",{className:"gene-list",children:[Object(f.jsx)("h5",{children:"Cistrome ID"}),Object(f.jsx)("input",{className:"search-box",type:"text",defaultValue:N,name:"default name",placeholder:"Cistrome ID (e.g., ".concat(N,")"),onKeyDown:function(e){switch(e.key){case"ArrowUp":case"ArrowDown":break;case"Enter":B(e.target.value)}}}),Object(f.jsx)("h5",{children:"Navigation"}),Object(f.jsx)("input",{className:"search-box",type:"text",name:"default name",placeholder:"chr6:151690496-152103274",onKeyDown:function(e){switch(e.key){case"ArrowUp":case"ArrowDown":break;case"Enter":A(e.target.value)}}}),Object(f.jsx)("h5",{children:"Chromosomes"}),[].concat(Object(d.a)(Array.from(Array(22).keys()).map((function(e){return e+1}))),["X","Y"]).map((function(e){return Object(f.jsx)("span",{className:"chr-button",onClick:function(){return t="chr".concat(e),void((null===Z||void 0===Z?void 0:Z.current)&&(Z.current.api.zoomTo("detail-view",t,h),Z.current.api.zoomTo("overview",t,h)));var t},children:"chr".concat(e)},e)})),Object(f.jsxs)("h5",{children:["Putative Targets ",Object(f.jsx)("a",{className:"sub-info",href:"http://dc2.cistrome.org/api/putative_target_ng?gene=&id=".concat(z),children:"Raw Data"})]}),null===X||void 0===X||null===(l=X.filter((function(e){return e.symbol===e.symbol.toUpperCase()||!0})).slice(0,10))||void 0===l?void 0:l.map((function(e){return Object(f.jsx)("div",{className:"gene-button",onClick:function(){return $(e.visual_coordinate)},children:e.symbol},e.symbol)})),Object(f.jsx)("h5",{children:"Export"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return ee(!0)},children:"PDF"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return ee(!1)},children:"PNG"})]}),Object(f.jsxs)("div",{className:"metadata-table",children:[Object(f.jsx)("h5",{children:"Inspector"}),Object(f.jsxs)("table",{children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"GEO or ENCODE"}),Object(f.jsx)("td",{children:null===H||void 0===H||null===(o=H.treats)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.unique_id})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Cistrome ID"}),Object(f.jsx)("td",{children:null===H||void 0===H?void 0:H.id})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Species"}),Object(f.jsx)("td",{children:null===H||void 0===H||null===(r=H.treats)||void 0===r||null===(m=r[0])||void 0===m?void 0:m.species__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Cell Line"}),Object(f.jsx)("td",{children:null===H||void 0===H||null===(v=H.treats)||void 0===v||null===(y=v[0])||void 0===y?void 0:y.cell_line__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Cell Type"}),Object(f.jsx)("td",{children:null===H||void 0===H||null===(x=H.treats)||void 0===x||null===(b=x[0])||void 0===b?void 0:b.cell_type__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Tissue"}),Object(f.jsx)("td",{children:null===H||void 0===H||null===(j=H.treats)||void 0===j||null===(O=j[0])||void 0===O?void 0:O.tissue_type__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Disease"}),Object(f.jsx)("td",{children:null===H||void 0===H||null===(k=H.treats)||void 0===k||null===(w=k[0])||void 0===w?void 0:w.disease_state__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Factor"}),Object(f.jsx)("td",{children:null===H||void 0===H||null===(_=H.treats)||void 0===_||null===(F=_[0])||void 0===F?void 0:F.factor__name})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Paper"}),Object(f.jsx)("td",{children:Object(f.jsx)("a",{href:null===H||void 0===H||null===(T=H.treats)||void 0===T||null===(C=T[0])||void 0===C?void 0:C.link,target:"_blank",rel:"noopener noreferrer",children:null===H||void 0===H||null===(D=H.treats)||void 0===D||null===(E=D[0])||void 0===E?void 0:E.paper__reference})})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Raw Data"}),Object(f.jsx)("td",{children:Object(f.jsx)("a",{href:"http://dc2.cistrome.org/api/inspector?id=".concat(null===H||void 0===H?void 0:H.id),target:"_blank",rel:"noopener noreferrer",children:"JSON"})})]})]}),Object(f.jsx)("h5",{children:"Expernal Links"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return window.open("http://dc2.cistrome.org/api/batchview/h/".concat(z.split(",").join("_"),"/w/"),"_blank")},children:"Wash U Browser"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return window.open("http://dc2.cistrome.org/api/batchview/h/".concat(z.split(",").join("_"),"/u/"),"_blank")},children:"UCSC Browser"})]})]})};n(81);o.a.render(Object(f.jsx)(a.a,{children:Object(f.jsx)(r.a,{component:v})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.5ecd257d.chunk.js.map