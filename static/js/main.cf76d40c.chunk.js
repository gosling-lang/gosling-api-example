(this["webpackJsonpgosling-cistrome"]=this["webpackJsonpgosling-cistrome"]||[]).push([[0],{75:function(e,t,i){},77:function(e,t,i){},83:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i(19),r=i.n(a),o=i(37),l=i(1),d=i(15),s=i(23),c=(i(43),i(34)),m=i(35),f=(i(75),i(2));var p=function(e){var t="1,2,4,6",i=Object(n.useState)(t),a=Object(s.a)(i,2),r=a[0],o=a[1],l=Object(n.useState)(window.innerWidth),p=Object(s.a)(l,2),g=p[0],u=p[1],y=Object(n.useRef)();function h(e,t){(null===y||void 0===y?void 0:y.current)&&(y.current.api.zoomToGene("detail-view",e,1e3),y.current.api.zoomTo("overview",t,1e3))}function x(){u(window.innerWidth)}Object(n.useEffect)((function(){window.addEventListener("resize",x)}),[]);var v=Object(n.useMemo)((function(){return function(e){var t=e.cids,i=e.width,n=void 0===i?2e3:i,a=e.height,r=void 0===a?500:a,o=["#0072B2","#D45E00","#029F73","#E79F00","#CB7AA7"],l="#878787",s="#878787",c=function(e){return o[e%o.length]},m=function(e){return"http://dc2.cistrome.org/genome_browser/bw/".concat(e,"_treat.bw")},f=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{alignment:"overlay",data:{url:m(e),type:"bigwig",column:"position",value:"peak",binSize:8},title:"Cistrome ID: "+e,tracks:i?[{},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}]:[{}],mark:"bar",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},y:{field:"peak",type:"quantitative"},color:{value:c(t)},stroke:{value:"lightgray"},strokeWidth:{value:.5},style:{outline:"gray"},width:n,height:40}};return console.log(t,t.filter((function(e){return+e})).map((function(e){return f(e)}))),{title:"Explore Cistrome Data Using Gosling.js",subtitle:"Cistrome IDs: ".concat(t.join(", ")),spacing:50,views:[{xDomain:{chromosome:"3"},linkingId:"overview",tracks:[{id:"overview",linkingId:"overview",title:"Ideogram",xDomain:{chromosome:"3"},layout:"linear",alignment:"overlay",data:{url:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/UCSC.HG38.Human.CytoBandIdeogram.csv",type:"csv",chromosomeField:"Chromosome",genomicFields:["chromStart","chromEnd"]},tracks:[{mark:"text",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],text:{field:"Name",type:"nominal"},color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["black","black","black","black","white","black"]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],style:{textStrokeWidth:0}},{mark:"rect",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"],not:!0}],color:{field:"Stain",type:"nominal",domain:["gneg","gpos25","gpos50","gpos75","gpos100","gvar"],range:["white","#D9D9D9","#979797","#636363","black","#82A3D0"]}},{mark:"triangleRight",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"q"}],color:{value:"#E9413B"}},{mark:"triangleLeft",dataTransform:[{type:"filter",field:"Stain",oneOf:["acen"]},{type:"filter",field:"Name",include:"p"}],color:{value:"#E9413B"}},{mark:"brush",x:{linkingId:"detail"},color:{value:"#D34B6C"},stroke:{value:"red"},strokeWidth:{value:2},opacity:{value:.6}}],x:{field:"chromStart",type:"genomic"},xe:{field:"chromEnd",type:"genomic"},stroke:{value:"gray"},strokeWidth:{value:.5},style:{outline:"black",outlineWidth:1},width:n,height:25}]},{xDomain:{chromosome:"3",interval:[1425e5,143e6]},linkingId:"detail",tracks:[].concat(Object(d.a)(t.filter((function(e){return+e})).map((function(e,t){return f(e,t)}))),[{id:"detail-view",alignment:"overlay",title:"hg38 | Genes",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=gene-annotation",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}],exonIntervalFields:[{index:12,name:"start"},{index:13,name:"end"}]},tracks:[{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-15,outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},size:{value:15},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleLeft",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"strand",type:"nominal",domain:["+","-"]},color:{field:"strand",type:"nominal",domain:["+","-"],range:[l,s]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{background:"#F5F5F5",outlineWidth:0},width:350,height:100},{title:"hg38 | GENECODE Transcript (Max. 15 Rows)",alignment:"overlay",data:{url:"https://server.gosling-lang.org/api/v1/tileset_info/?d=transcript-hg38-beddb",type:"beddb",genomicFields:[{index:1,name:"start"},{index:2,name:"end"}],valueFields:[{index:5,name:"strand",type:"nominal"},{index:3,name:"name",type:"nominal"}]},dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],tracks:[{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"triangleRight",x:{field:"end",type:"genomic"},size:{value:15}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]}],mark:"text",text:{field:"name",type:"nominal"},x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"},style:{dy:-10,outline:"black"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"triangleLeft",x:{field:"start",type:"genomic"},size:{value:15},style:{align:"right",outline:"black"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["exon"]}],mark:"rect",x:{field:"start",type:"genomic"},xe:{field:"end",type:"genomic"}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["+"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}},{dataTransform:[{type:"displace",method:"pile",boundingBox:{startField:"start",endField:"end"},newField:"row",maxRows:15},{type:"filter",field:"type",oneOf:["gene"]},{type:"filter",field:"strand",oneOf:["-"]}],mark:"rule",x:{field:"start",type:"genomic"},strokeWidth:{value:2},xe:{field:"end",type:"genomic"},style:{linePattern:{type:"triangleRight",size:3.5},outline:"black",outlineWidth:0}}],row:{field:"row",type:"nominal"},color:{field:"strand",type:"nominal",domain:["+","-"],range:[l,s]},visibility:[{operation:"less-than",measure:"width",threshold:"|xe-x|",transitionPadding:10,target:"mark"}],opacity:{value:.8},style:{outline:"black",outlineWidth:0,background:"white"},width:n,height:r}])}]}}({cids:r.split(","),width:g-120-400})}),[r,g]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"vis",children:Object(f.jsx)(m.GoslingComponent,{ref:y,spec:v,compiled:function(e,t){}})}),Object(f.jsxs)("div",{className:"gene-list",children:[Object(f.jsx)("h5",{children:"Cistrome ID"}),Object(f.jsx)("input",{className:"search-box",type:"text",defaultValue:t,name:"default name",placeholder:"Cistrome ID (e.g., ".concat(t,")"),onChange:Object(c.debounce)((function(e){o(e.target.value)}),1e3)}),Object(f.jsx)("h5",{children:"Chromosomes"}),[].concat(Object(d.a)(Array.from(Array(22).keys()).map((function(e){return e+1}))),["X","Y"]).map((function(e){return Object(f.jsx)("span",{className:"chr-button",onClick:function(){return t="chr".concat(e),void((null===y||void 0===y?void 0:y.current)&&(y.current.api.zoomTo("detail-view",t,1e3),y.current.api.zoomTo("overview",t,1e3)));var t},children:"chr".concat(e)},e)})),Object(f.jsx)("h5",{children:"Genes"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return h("TP53","chr17")},children:"TP53"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return h("TNF","chr6")},children:"TNF"}),Object(f.jsx)("div",{className:"gene-button",onClick:function(){return h("MYC","chr8")},children:"MYC"}),Object(f.jsx)("div",{className:"gene-button",children:"..."})]})]})};i(77);r.a.render(Object(f.jsx)(o.a,{children:Object(f.jsx)(l.a,{component:p})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.cf76d40c.chunk.js.map